@using SancionadosSAGB2025.Client.Services
@using SancionadosSAGB2025.Shared.Sanciones;
@using SancionadosSAGB2025.Client.Shared.Partial.Cards;
@inject ISnackbar Snackbar;
@inject HttpClient _http
@inject FaltasSPGService FaltasSPGService
@inject CatalagosServiceClient CatalagosService
@inject AuthService AuthService
@inject IDialogService DialogService
@inject IJSRuntime JS

<MudGrid Justify="Justify.FlexEnd">
    @if (IsEditMode != (int)TipoVistaComponentes.Agregar)
    {
        <MudItem xs="12" class="d-flex justify-end pb-5">
            <MudButton StartIcon="@Icons.Material.Filled.KeyboardBackspace" Class="mt-3 w-25" Variant="Variant.Filled" Color="Color.Primary" OnClick="Regresar">
                Volver a Buscar Servidores
            </MudButton>
        </MudItem>
    }
    else
    {
        @if (FaltasDeServidoresPublicosG.Id is not null)
        {
            <MudItem xs="12" class="d-flex justify-end pb-5">
                <MudButton StartIcon="@Icons.Material.Filled.Edit" Class="mt-3 w-25" Variant="Variant.Filled" Color="Color.Primary" OnClick="CancelarForm">
                    Cancelar registro
                </MudButton>
            </MudItem>
        }
        else
        {
            <MudItem xs="12" class="d-flex justify-end pb-5">
                <MudButton StartIcon="@Icons.Material.Filled.KeyboardBackspace" Class="mt-3 w-25" Variant="Variant.Filled" Color="Color.Primary" Href="FaltasGravesPersonasMorales">
                    Volver a Buscar Servidores
                </MudButton>
            </MudItem>
        }

    }
</MudGrid>
<br />
<MudStepper Vertical="true" @bind-ActiveIndex="index" NonLinear="modoVista" OnPreviewInteraction="OnPreviewInteraction">
    <ChildContent>
        <MudStep Title="1. FECHA* (DD-MM-AAAA)*" CompletedStepColor="Color.Success">
            <MudForm @ref="_formFecha" @bind-IsValid="_isStep1Valid[0]">
                <MudDatePicker Label="FECHA" @bind-Date="FaltasDeServidoresPublicosG.Sancion!.Fecha" required="!modoVista" helpertext="Indicar la fecha en la que se registra la información" Disabled="IsEditMode == (int)TipoVistaComponentes.Ver" />
            </MudForm>
        </MudStep>
        <MudStep Title="2. EXPEDIENTE*" CompletedStepColor="Color.Success">
            <MudForm @ref="_formExpediente" @bind-IsValid="_isStep1Valid[1]">
                <MudGrid>
                    <MudItem xs="6">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Sancion!.Expediente"
                                      label="EXPEDIENTE"
                                      required="!modoVista"
                                      RequiredError="El campo de expediente es obligatorio"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      helpertext="Registrar el número de expediente en el que recae la resolución." />
                    </MudItem>
                </MudGrid>
            </MudForm>
        </MudStep>
        <MudStep Title="3. DATOS GENERALES DE LA PERSONA SERVIDORA PÚBLICA SANCIONADA*" CompletedStepColor="Color.Success">
            <MudForm @ref="_formDatosGenerales" @bind-IsValid="_isStep1Valid[2]">
                <MudGrid>
                    <MudItem xs="12">
                        <MudAlert Severity="Severity.Warning" Variant="Variant.Filled">
                            Se deberá escribir el o los nombres, así como los apellidos, sin abreviaturas, sin acentos, ni signos especiales.
                            En caso de tener sólo un apellido, deberá colocarse en el espacio del primer apellido y dejar el espacio del segundo apellido en blanco
                        </MudAlert>
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.DatosGenerales!.Nombres"
                                      label="NOMBRE (S)"
                                      required="!modoVista"
                                      RequiredError="El campo Nombres es obligatorio."
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "nombresInput" })" />
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.DatosGenerales!.PrimerApellido"
                                      label="PRIMER APELLIDO"
                                      required="!modoVista"
                                      RequiredError="El campo Primer Apellido es obligatorio."
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "primerApellidoInput" })" />
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.DatosGenerales!.SegundoApellido"
                                      label="SEGUNDO APELLIDO"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "segundoApellidoInput" })" />
                    </MudItem>
                    <MudItem xs="4">

                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.DatosGenerales!.Curp"
                                      label="CURP"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      required="!modoVista"
                                      RequiredError="El campo Curp es obligatorio."
                                      MaxLength="18"
                                      helpertext="Escribir los dieciocho caracteres alfanuméricos como aparece en el documento que emite la Secretaría de Gobernación."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "curpInput" })" />                    
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.DatosGenerales!.Rfc"
                                      label="RFC CON HOMOCLAVE"
                                      required="!modoVista"
                                      MaxLength="13"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      RequiredError="El campo RFC es obligatorio."
                                      helpertext="Escribir los primeros diez caracteres básicos y los tres correspondientes a la homoclave."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "rfcInput" })" />                       
                    </MudItem>
                    <MudItem xs="4">

                        @if (FaltasDeServidoresPublicosG?.DatosGenerales != null && Sexos != null)
                        {
                            <MudSelect @bind-Value="FaltasDeServidoresPublicosG.DatosGenerales.IdSexoFk"
                                       Label="SEXO"
                                       Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                       Required="!modoVista"
                                       RequiredError="El campo Sexo es obligatorio.">
                                @foreach (var sexo in Sexos)
                                {
                                    <MudSelectItem Value="@sexo.IdSexo">@sexo.Descripcion</MudSelectItem>
                                }
                            </MudSelect>
                        }
                        else
                        {
                            <MudText> Cargando catálogo de sexo... </MudText>
                        }


                       
                    </MudItem>
                </MudGrid>
            </MudForm>
        </MudStep>
        <MudStep Title="4. DATOS DEL EMPLEO, CARGO O COMISIÓN DE LA PERSONA SERVIDORA PÚBLICA SANCIONADA*" CompletedStepColor="Color.Success">
            <MudForm @ref="_formDatosEmpleo" @bind-IsValid="_isStep1Valid[3]">
                <MudGrid>
                    <MudItem xs="4">
                        <MudSelect @bind-Value="FaltasDeServidoresPublicosG!.EmpleoCargoComision!.EntidadFederativa"
                                   Label="ENTIDAD FEDERATIVA"
                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                   required="!modoVista"
                                   RequiredError="El campo de Entidad Federativa es obligatorio."
                                   HelperText="Seleccionar la entidad federativa donde se ubica el Ente público donde labora o laboraba la persona servidora pública sancionada, al momento de cometer la falta administrativa. ">
                            @foreach (var entidad in EntidadesFederativas)
                            {
                                <MudSelectItem Value="@entidad">@entidad.Descripcion</MudSelectItem>
                            }
                        </MudSelect>
                        @if (FaltasDeServidoresPublicosG.EmpleoCargoComision!.EntidadFederativa is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Entidad Federativa es obligatorio.</MudText>
                        }
                    </MudItem>
                    <MudItem xs="4">
                        <MudSelect @bind-Value="FaltasDeServidoresPublicosG!.EmpleoCargoComision!.NivelOrdenGobierno"
                                   Label="NIVEL/ORDEN DE GOBIERNO"
                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                   required="!modoVista"
                                   RequiredError="El campo de Nivel Orden Gobierno es obligatorio."
                                   HelperText="Seleccionar el nivel u orden de gobierno">
                            @if (NivelOrdenGobierno is not null)
                            {
                                @foreach (var nivel in NivelOrdenGobierno)
                                {
                                    <MudSelectItem Value="@nivel">@nivel.Descripcion</MudSelectItem>
                                }
                            }
                        </MudSelect>
                        @if (FaltasDeServidoresPublicosG.EmpleoCargoComision!.NivelOrdenGobierno is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Nivel Orden Gobierno es obligatorio.</MudText>
                        }
                    </MudItem>
                    <MudItem xs="4">
                        <MudSelect @bind-Value="FaltasDeServidoresPublicosG!.EmpleoCargoComision!.AmbitoPublico"
                                   Label="ÁMBITO PÚBLICO"
                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                   required="!modoVista"
                                   RequiredError="El campo de Ambito Publico es obligatorio."
                                   HelperText="Seleccionar el ámbito público">
                            @foreach (var ambito in AmbitoPublico)
                            {
                                <MudSelectItem Value="@ambito">@ambito.Descripcion</MudSelectItem>
                            }
                        </MudSelect>
                        @if (FaltasDeServidoresPublicosG.EmpleoCargoComision!.AmbitoPublico is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Ambito Publico es obligatorio.</MudText>
                        }
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.EmpleoCargoComision!.NombreEnte"
                                      label="NOMBRE DEL ENTE PÚBLICO"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      required="!modoVista"
                                      RequiredError="El campo Nombre Ente Publico es obligatorio"
                                      helpertext="Indicar el nombre completo del Ente público, sin abreviaturas, sin acentos, ni signos especiales."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "nombreEnteInput" })" />
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.EmpleoCargoComision!.SiglasEntePublico"
                                      label="SIGLAS DEL ENTE PÚBLICO"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      helpertext="Indicar las siglas del Ente público."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "siglasEntePublicoInput" })" />
                    </MudItem>

                    <MudItem xs="4">
                        <MudSelect @bind-Value="FaltasDeServidoresPublicosG!.NivelJerarquico!.Clave"
                                   Label="NIVEL JERÁRQUICO DEL EMPLEO, CARGO O COMISIÓN"
                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                   HelperText="Señalar el nivel jerárquico del empleo, cargo o comisión:">
                            @if (NivelJerarquico is not null)
                            {
                                @foreach (var nivel in NivelJerarquico)
                                {
                                    <MudSelectItem Value="@nivel">@nivel.Clave</MudSelectItem>
                                }
                            }
                        </MudSelect>
                        @if (FaltasDeServidoresPublicosG.NivelJerarquico!.Clave is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Clave es obligatorio.</MudText>
                        }
                    </MudItem>
                    @if (FaltasDeServidoresPublicosG!.NivelJerarquico?.Clave?.Clave?.Contains("OTRO (Especifique)") == true)
                    {
                        <MudItem xs="4">
                            <MudTextField @bind-value="FaltasDeServidoresPublicosG!.NivelJerarquico!.Valor"
                                          Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                          label="Valor"
                                          required="!modoVista"
                                          UserAttributes="@(new Dictionary<string, object> { ["id"] = "valorInput" })"
                                          RequiredError="El campo de Valor es obligatorio."
                                          helpertext="En caso de seleccionar la opción OTRO, se deberá especificar el tipo de nivel jerárquico del empleo, cargo o comisión que desempeña la persona servidora pública sancionada." />
                        </MudItem>
                    }

                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.NivelJerarquico!.Denominacion"
                                      label="DENOMINACIÓN DEL EMPLEO, CARGO O COMISIÓN"
                                      required="!modoVista"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      RequiredError="El campo de Denominacion es obligatorio."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "denominacionInput" })"
                                      helpertext="Escribir la denominación completa del empleo, cargo o comisión que aparece en el recibo de nómina, nombramiento, contrato u oficio de comisión, sin abreviaturas, sin acentos, ni signos especiales." />
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.NivelJerarquico!.AreaAdscripcion"
                                      label="ÁREA DE ADSCRIPCIÓN"
                                      required="!modoVista"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      RequiredError="El campo de Area Adscripcion es obligatorio."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "areaAdscripcionInput" })"
                                      helpertext="Especificar el nombre de la Unidad Administrativa del Ente público a la que está o estaba adscrita la persona servidora pública sancionada, sin abreviaturas, sin acentos, ni signos especiales." />
                    </MudItem>

                </MudGrid>
            </MudForm>
        </MudStep>
        <MudStep Title="5. ORIGEN DEL PROCEDIMIENTO*" CompletedStepColor="Color.Success">
            <MudForm @ref="_formOrigenProcedimiento" @bind-IsValid="_isStep1Valid[4]">
                <MudGrid>
                    <MudItem xs="4">
                        <MudSelect T="int?"
                                   @bind-Value="FaltasDeServidoresPublicosG.OrigenProcedimiento.IdOrigenProcedimientoCatFK"
                                   Label="Clave"
                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                   HelperText="Se deberá señalar el motivo que dio origen a la investigación por la comisión de la falta administrativa grave.">

                            @foreach (var origen in ListaOrigenesInvestigacion)
                            {
                                <MudSelectItem Value="@origen.IdOrigenProcedimiento">@origen.Clave</MudSelectItem>
                            }
                        </MudSelect>

                    </MudItem>
                    @if (FaltasDeServidoresPublicosG!.OrigenProcedimiento?.Clave?.Clave?.Contains("OTRO (Especifique)") == true)
                    {
                        <MudItem xs="4">
                            <MudTextField @bind-value="FaltasDeServidoresPublicosG!.OrigenProcedimiento!.Valor"
                                          Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                          label="Valor"
                                          required="!modoVista"
                                          RequiredError="El campo de Valor es obligatorio."
                                          helpertext="En caso de seleccionar la opción OTRO, se deberá especificar el motivo que dio origen a la investigación por la comisión de la falta administrativa grave."
                                          UserAttributes="@(new Dictionary<string, object> { ["id"] = "ValorOrigenInput" })" />
                        </MudItem>
                    }
                </MudGrid>
            </MudForm>
        </MudStep>
        <MudStep Title="6. TIPO DE FALTA COMETIDA POR LA PERSONA SERVIDORA PÚBLICA SANCIONADA*" CompletedStepColor="Color.Success">
            <MudForm @ref="_formTipoFaltaCometida" @bind-IsValid="_isStep1Valid[5]">
                <MudGrid>
                    <MudItem xs="6">
                        <MudSelect @bind-Value="FaltasDeServidoresPublicosG!.FaltaCometida!.MultipleFalta"
                                   T="string" MultiSelection="true" @bind-SelectedValues="_optionsFaltaComedia"
                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                   Label="TIPO FALTA COMETIDA"
                                   HelperText="Seleccionar del catálogo la (s) falta (s) cometida (s) por la persona servidora pública. Se podrán elegir de las siguientes opciones:">
                            @foreach (var falta in FaltasCometidas)
                            {
                                <MudSelectItem Value="@falta.Descripcion">@falta.Descripcion</MudSelectItem>
                            }
                        </MudSelect>
                        @if (!(_optionsFaltaComedia ?? Enumerable.Empty<string>()).Any())
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Clave es obligatorio.</MudText>
                        }
                    </MudItem>

                    @if ((_optionsFaltaComedia ?? Enumerable.Empty<string>()).Contains("OTRO (Especifique)"))
                    {
                        <MudItem xs="6">
                            <MudTextField @bind-value="FaltasDeServidoresPublicosG!.FaltaCometida!.Valor"
                                          Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                          label="Valor"
                                          required="!modoVista"
                                          RequiredError="El campo de Valor es obligatorio."
                                          helpertext="En caso de seleccionar la opción OTRO, se deberá especificar el el tipo de falta cometida por parte de la persona servidora pública sancionada."
                                          UserAttributes="@(new Dictionary<string, object> { ["id"] = "ValorFaltaCometidaInput" })" />
                        </MudItem>
                    }
                    <MudItem xs="6">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.FaltaCometida!.NombreNormatividad"
                                      label="NORMATIVIDAD INFRINGIDA"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      required="!modoVista"
                                      RequiredError="El campo de Nombre Normatividad es obligatorio."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "nombreNormatividadInput" })"
                                      helpertext="Escribir el nombre de la normatividad infringida por la persona servidora pública, sin abreviaturas, sin acentos, ni signos especiales;" />
                    </MudItem>
                    <MudItem xs="6">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.FaltaCometida!.Articulo"
                                      label="ARTÍCULO(S) DE LA NORMATIVIDAD INFRINGIDA"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      required="!modoVista"
                                      RequiredError="El campo de Articulo es obligatorio."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "articuloInput" })"
                                      helpertext="Escribir el (los) artículo (s) infringido (s)." />
                    </MudItem>
                    <MudItem xs="6">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.FaltaCometida!.FraccionNormatividad"
                                      label="FRACCIÓN(ES) DE LA NORMATIVIDAD INFRINGIDA"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      helpertext="En su caso, escribir la (s) fracción (es) infringida (s)." />
                    </MudItem>
                    <MudItem xs="6">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.FaltaCometida!.DescripcionHechos"
                                      label="DESCRIPCIÓN BREVE DE LOS HECHOS"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "descripcionHechosInput" })"
                                      required="!modoVista"
                                      RequiredError="El campo de Descripcion Hechos es obligatorio."
                                      Lines="4"
                                      AutoGrow
                                      helpertext="Redactar una descripción breve de los hechos, sin incluir información reservada o confidencial, de conformidad con la normatividad en materia de transparencia y protección de datos personales." />
                    </MudItem>
                </MudGrid>
            </MudForm>
        </MudStep>
        <MudStep Title="7. RESOLUCIÓN SANCIONATORIA DE LA FALTA COMETIDA POR LA PERSONA SERVIDORA PÚBLICA*" CompletedStepColor="Color.Success">
            <MudForm @ref="_formResolucionSancionatoria" @bind-IsValid="_isStep1Valid[6]">
                <MudGrid>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Resolucion!.TituloDocumento"
                                      label="TÍTULO DEL DOCUMENTO"
                                      required="!modoVista"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      RequiredError="El campo Titulo Documento es obligatorio."
                                      helpertext="Escribir el nombre del documento que resuelve el procedimiento de responsabilidad administrativa y que ha quedado firme."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "tituloDocumentoInput" })" />
                    </MudItem>
                    <MudItem xs="4">
                        <MudDatePicker Label="FECHA DE LA RESOLUCIÓN (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Resolucion!.FechaResolucion" required="!modoVista"
                                       Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                       RequiredError="El campo Fecha Resolucion es obligatorio." helpertext="Colocar la fecha en la que se emite la resolución definitiva." />
                        @if (FaltasDeServidoresPublicosG.Resolucion!.FechaResolucion is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Resolucion es obligatorio</MudText>
                        }
                    </MudItem>
                    <MudItem xs="4">
                        <MudDatePicker Label="FECHA DE NOTIFICACIÓN (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Resolucion!.FechaNotificacion" required="!modoVista"
                                       Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                       RequiredError="El campo Fecha Notificacion es obligatorio." helpertext="Indicar la fecha en que se notifica la resolución definitiva a la persona servidora pública sancionada." />
                        @if (FaltasDeServidoresPublicosG.Resolucion!.FechaNotificacion is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Notificacion es obligatorio</MudText>
                        }
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Resolucion!.UrlResolucion"
                                      label="URL DE LA VERSIÓN PÚBLICA DE LA RESOLUCIÓN DE SANCIÓN EN FORMATO DIGITAL"
                                      required="!modoVista"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      RequiredError="El campo Url Resolucion es obligatorio."
                                      helpertext="Colocar el enlace de la versión pública de la resolución emitida por la autoridad a la que corresponde la sanción."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "urlResolucionInput" })" />
                    </MudItem>
                    <MudItem xs="4">
                        <MudDatePicker Label="FECHA EN QUE ADQUIRIÓ FIRMEZA LA RESOLUCIÓN (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Resolucion!.FechaResolucionFirme"
                                       Disabled="IsEditMode == (int)TipoVistaComponentes.Ver" required="!modoVista" RequiredError="El campo Fecha Resolucion Firme es obligatorio."
                                       helpertext="Colocar la fecha en que adquirió firmeza la resolución de la persona servidora pública." />
                        @if (FaltasDeServidoresPublicosG.Resolucion!.FechaResolucionFirme is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Resolucion Firme es obligatorio</MudText>
                        }
                    </MudItem>
                    <MudItem xs="4">
                        <MudDatePicker Label="FECHA DE NOTIFICACIÓN DE LA RESOLUCIÓN FIRME (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Resolucion!.FechaNotificacionFirme" required="!modoVista" Disabled="IsEditMode == (int)TipoVistaComponentes.Ver" RequiredError="El campo Fecha Notificacion Firme es obligatorio."
                                       helpertext="Indicar la fecha en que se notifica a la persona servidora pública que la resolución ha quedado firme." />
                        @if (FaltasDeServidoresPublicosG.Resolucion!.FechaNotificacionFirme is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Notificacion Firme es obligatorio</MudText>
                        }
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Resolucion!.UrlResolucionFirme"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      label="URL DE LA VERSIÓN PÚBLICA DEL ACUERDO O DETERMINACIÓN QUE DECLARE FIRME LA RESOLUCIÓN EN FORMATO DIGITAL"
                                      required="!modoVista"
                                      RequiredError="El campo Url Resolucion Firme es obligatorio."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "urlResolucionFirmeInput" })"
                                      helpertext="Colocar el enlace de la versión pública del acuerdo o determinación que dicte la autoridad competente en la que declara que la resolución definitiva ha quedado firme." />
                    </MudItem>
                    <MudItem xs="4">
                        <MudDatePicker Label="FECHA DE EJECUCIÓN DE LA SANCIÓN (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Resolucion!.FechaEjecucion" Disabled="IsEditMode == (int)TipoVistaComponentes.Ver" helpertext="Anotar la fecha en la que se ejecutó la sanción a la persona servidora pública.
                                            Si al momento de registrar la información la autoridad no cuenta con el dato señalado en el presente numeral, esta podrá registrarse posteriormente mediante una actualización de su registro." />
                    </MudItem>
                    <MudItem xs="4">
                        <MudSelect @bind-Value="FaltasDeServidoresPublicosG!.Resolucion!.OrdenJurisdiccional"
                                   Label="ORDEN JURISDICCIONAL"
                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                   required="!modoVista"
                                   RequiredError="El campo Orden Jurisdiccional es obligatorio."
                                   HelperText="Seleccionar la opción correspondiente al orden jurisdiccional del ente público que emitió la resolución:">
                            @if (OrdenJurisdiccional is not null)
                            {
                                @foreach (var orden in OrdenJurisdiccional)
                                {
                                    <MudSelectItem Value="@orden">@orden.Descripcion</MudSelectItem>
                                }
                            }

                        </MudSelect>
                        @if (FaltasDeServidoresPublicosG.Resolucion!.OrdenJurisdiccional is null)
                        {
                            <MudText Typo="Typo.caption" Color="Color.Error">El campo de Orden Jurisdiccional es obligatorio</MudText>
                        }
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Resolucion!.AutoridadResolutora"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      label="AUTORIDAD RESOLUTORA"
                                      required="!modoVista"
                                      RequiredError="El campo Autoridad Resolutora es obligatorio."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "autoridadResolutoraInput" })"
                                      helpertext="Indicar el nombre de la autoridad facultada para dictar la sanción" />
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Resolucion!.AutoridadInvestigadora"
                                      label="AUTORIDAD INVESTIGADORA"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      required="!modoVista"
                                      RequiredError="El campo Autoridad Investigadora es obligatorio."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "autoridadInvestigadoraInput" })"
                                      helpertext="Especificar el nombre de la autoridad encargada de la investigación de la falta administrativa grave." />
                    </MudItem>
                    <MudItem xs="4">
                        <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Resolucion!.AutoridadSubstanciadora"
                                      label="AUTORIDAD SUBSTANCIADORA"
                                      Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                      required="!modoVista"
                                      RequiredError="El campo Autoridad Substanciadora es obligatorio."
                                      UserAttributes="@(new Dictionary<string, object> { ["id"] = "autoridadSubstanciadoraInput" })"
                                      helpertext="Señalar el nombre de la autoridad substanciadora del procedimiento." />
                    </MudItem>
                </MudGrid>
            </MudForm>
        </MudStep>
        <MudStep Title="8. TIPO DE SANCIÓN IMPUESTA A LA PERSONA SERVIDORA PÚBLICA*" CompletedStepColor="Color.Success">
            <MudForm @ref="_formTipoSancionImpuesta" @bind-IsValid="_isStep1Valid[7]">
                <MudGrid>
                    <MudItem xs="6">
                        <MudSelect @bind-Value="FaltasDeServidoresPublicosG!.MultipleSancion"
                                   @bind-SelectedValues="_options"
                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                   T="string"
                                   Label="Tipo Sancion"
                                   required="!modoVista"
                                   RequiredError="El campo Clave es obligatorio."
                                   HelperText="Elegir una o varias sanciones, según corresponda, conforme al catálogo y que fueron dictaminadas en la resolución definitiva. Se podrán elegir de las siguientes opciones:"
                                   MultiSelection="true">
                            @foreach (var clave in TipoSancionClaves)
                            {
                                <MudSelectItem Value="@clave.Clave">@clave.Clave</MudSelectItem>
                            }
                        </MudSelect>
                     </MudItem>
                </MudGrid>
            </MudForm>
            @if ((_options ?? Enumerable.Empty<string>()).Contains("SUSPENSIÓN DEL EMPLEO,CARGO O COMISIÓN"))
            {
                <CardForm>
                    <Header>
                        A. SUSPENSIÓN DEL EMPLEO, CARGO O COMISIÓN*
                    </Header>
                    <Content>
                        <MudForm @ref="_formSuspension" @bind-IsValid="_isStep1Valid[8]">
                            <MudGrid>
                                <MudItem xs="4">
                                    <MudNumericField HideSpinButtons="true" @bind-Value="FaltasDeServidoresPublicosG!.Suspension!.PlazoMeses" label="MES (ES)"
                                                     Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                     Variant="Variant.Text" Min="0" required="!modoVista" RequiredError="El campo Plazo Meses es obligatorio."
                                                     helpertext="Colocar el plazo de la suspensión de la persona servidora pública sancionada, empezando por mes (es) y/o día (s)." />
                                </MudItem>
                                <MudItem xs="4">
                                    <MudNumericField HideSpinButtons="true" @bind-Value="FaltasDeServidoresPublicosG!.Suspension!.PlazoDias" label="DÍA (S)"
                                                     Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                     Variant="Variant.Text" Min="0" required="!modoVista" RequiredError="El campo Plazo Dias es obligatorio."
                                                     helpertext="Colocar el plazo de la suspensión de la persona servidora pública sancionada, empezando por mes (es) y/o día (s)." />
                                </MudItem>
                                <MudItem xs="4">
                                    <MudDatePicker Label="FECHA INICIAL (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Suspension!.FechaInicial" required="!modoVista"
                                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                   helpertext="Indicar la fecha en la que inició la suspensión de la persona servidora pública." />
                                    @if (FaltasDeServidoresPublicosG.Suspension!.FechaInicial is null)
                                    {
                                        <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Inicial es obligatorio.</MudText>
                                    }
                                </MudItem>
                                <MudItem xs="4">
                                    <MudDatePicker Label="FECHA FINAL (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Suspension!.FechaFinal" required="!modoVista"
                                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                   helpertext="Indicar la fecha en la que se concluye la suspensión de la persona servidora pública." />
                                    @if (FaltasDeServidoresPublicosG.Suspension!.FechaFinal is null)
                                    {
                                        <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Final es obligatorio.</MudText>
                                    }
                                </MudItem>
                            </MudGrid>
                        </MudForm>
                    </Content>
                </CardForm>
               
            }
            @if ((_options ?? Enumerable.Empty<string>()).Contains("DESTITUCIÓN DEL EMPLEO,CARGO O COMISIÓN"))
            {
                <CardForm>
                    <Header>
                        B. DESTITUCIÓN DEL EMPLEO, CARGO O COMISIÓN*
                    </Header>
                    <Content>
                        <MudForm @ref="_formDestitucion" @bind-IsValid="_isStep1Valid[9]">
                            <MudGrid>
                                <MudItem xs="6">
                                    <MudDatePicker Label="FECHA DE DESTITUCIÓN (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.DestitucionEmpleo!.FechaDestitucion" required="!modoVista"
                                                   Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                   helpertext="Indicar la fecha de destitución de la persona servidora pública." />
                                    @if (FaltasDeServidoresPublicosG.DestitucionEmpleo!.FechaDestitucion is null)
                                    {
                                        <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Destitucion es obligatorio.</MudText>
                                    }
                                </MudItem>
                            </MudGrid>
                        </MudForm>
                    </Content>
                </CardForm>
                
            }
            @if ((_options ?? Enumerable.Empty<string>()).Contains("SANCION ECONOMICA"))
            {
                <CardForm>
                    <Header>
                        C. SANCIÓN ECONÓMICA*
                    </Header>
                    <Content>
                        <MudForm @ref="_formTipoSancionImpuesta" @bind-IsValid="_isStep1Valid[10]">
                            <MudGrid>
                                <MudItem xs="4">
                                    <MudTextField @bind-value="FaltasDeServidoresPublicosG!.SancionEconomica!.Monto"
                                                  Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                  label="MONTO"
                                                  required="!modoVista"
                                                  RequiredError="El campo Monto es obligatorio."
                                                  helpertext="Colocar el monto total de la sanción económica." />
                                </MudItem>
                                <MudItem xs="4">
                                    <MudSelect @bind-Value="FaltasDeServidoresPublicosG!.SancionEconomica!.Moneda"
                                               Label="MONEDA (Ejemplo: MXN de acuerdo con el ISO 4217)"
                                               Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                               required="!modoVista"
                                               RequiredError="El campo Moneda es obligatorio."
                                               HelperText="Elegir el tipo de moneda:">
                                        @foreach (var moneda in TipoMonedas)
                                        {
                                            <MudSelectItem Value="@moneda">@moneda.Descripcion</MudSelectItem>
                                        }
                                    </MudSelect>
                                    @if (FaltasDeServidoresPublicosG.SancionEconomica!.Moneda is null)
                                    {
                                        <MudText Typo="Typo.caption" Color="Color.Error">El campo de Moneda es obligatorio.</MudText>
                                    }
                                </MudItem>
                            </MudGrid>
                        </MudForm>
                    </Content>
                </CardForm>
                
            }
            @if ((_options ?? Enumerable.Empty<string>()).Contains("INHABILITACIÓN TEMPORAL PARA DESEMPEÑAR EMPLEOS, CARGOS O COMISIONES EN EL SERVICIO PÚBLICO Y PARA PARTICIPAR EN ADQUISICIONES, ARRENDAMIENTOS, SERVICIOS U OBRAS PÚBLICAS"))
            {
                <CardForm>
                    <Header>
                        D. INHABILITACIÓN TEMPORAL PARA DESEMPEÑAR EMPLEOS, CARGOS O COMISIONES EN EL SERVICIO PÚBLICO Y PARA PARTICIPAR EN
                        ADQUISICIONES, ARRENDAMIENTOS, SERVICIOS U OBRAS PÚBLICAS *
                    </Header>
                    <Content>
                        <MudForm @ref="_formInhabilitacion" @bind-IsValid="_isStep1Valid[11]">
                            <MudGrid Justify="Justify.FlexStart">
                                <MudItem xs="4">
                                    <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Inhabilitacion!.Anio"
                                                  Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                  label="AÑO (S)"
                                                  required="!modoVista"
                                                  RequiredError="El campo Año es obligatario." />
                                </MudItem>
                                <MudItem xs="4">
                                    <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Inhabilitacion!.Mes"
                                                  Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                  label="MES (ES)"
                                                  required="!modoVista"
                                                  RequiredError="El campo Mes es obligatario." />
                                </MudItem>
                                <MudItem xs="4">
                                    <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Inhabilitacion!.Dia"
                                                  Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                  label="DÍA (S)"
                                                  required="!modoVista"
                                                  RequiredError="El campo Dia es obligatario." />
                                </MudItem>
                                <MudItem xs="4">
                                    <MudDatePicker Label="FECHA INICIAL* (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Inhabilitacion!.FechaInicial" required="!modoVista" helpertext="Indicar la fecha en la que inició la inhabilitación." Disabled="IsEditMode == (int)TipoVistaComponentes.Ver" />
                                    @if (FaltasDeServidoresPublicosG.Inhabilitacion!.FechaInicial is null)
                                    {
                                        <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Inicial es obligatorio.</MudText>
                                    }
                                </MudItem>
                                <MudItem xs="4">
                                    <MudDatePicker Label="FECHA FINAL (DD-MM-AAAA)" @bind-Date="FaltasDeServidoresPublicosG.Inhabilitacion!.FechaFinal" required="!modoVista" helpertext="Indicar la fecha en la que se concluyó la inhabilitación." Disabled="IsEditMode == (int)TipoVistaComponentes.Ver" />
                                    @if (FaltasDeServidoresPublicosG.Inhabilitacion!.FechaFinal is null)
                                    {
                                        <MudText Typo="Typo.caption" Color="Color.Error">El campo de Fecha Final es obligatorio.</MudText>
                                    }
                                </MudItem>
                            </MudGrid>
                        </MudForm>
                    </Content>
                </CardForm>
                
            }
            @if ((_options ?? Enumerable.Empty<string>()).Contains("OTRO (Especifique)"))
            {
                <CardForm>
                    <Header>
                        E. OTRO*
                    </Header>
                    <Content>
                        <MudForm @ref="_formOtro" @bind-IsValid="_isStep1Valid[12]">
                            <MudGrid Justify="Justify.FlexStart">
                                <MudItem xs="6">
                                    <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Otro!.DenominacionSancion"
                                                  label="DENOMINACIÓN DE LA SANCIÓN"
                                                  Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                                  required="!modoVista"
                                                  UserAttributes="@(new Dictionary<string, object> { ["id"] = "denominacionSancionInput" })"
                                                  RequiredError="El campo Denominacion Sancion es obligatorio."
                                                  helpertext="Indicar el nombre de la sanción, sin abreviaturas, sin acentos, ni signos especiales." />
                                </MudItem>
                            </MudGrid>
                        </MudForm>
                    </Content>
                </CardForm>
                
            }            
            
        </MudStep>
        <MudStep Title="9. OBSERVACIONES" CompletedStepColor="Color.Success">
            <MudGrid Justify="Justify.FlexStart">
                <MudItem xs="8">
                    <MudTextField @bind-value="FaltasDeServidoresPublicosG!.Otro!.Observaciones"
                                  Disabled="IsEditMode == (int)TipoVistaComponentes.Ver"
                                  label="Observaciones" Lines="4"
                                  helpertext="En este espacio se podrán realizar las aclaraciones u observaciones que se consideren pertinentes respecto de alguno o algunos de los apartados del Formato." />
                </MudItem>
            </MudGrid>
        </MudStep>
    </ChildContent>
    <ActionContent Context="stepper">
        <MudButton EndIcon="@Icons.Material.Filled.NavigateBefore"
                   Color="Color.Primary"
                   OnClick="@(() => stepper.PreviousStepAsync())">
            Regresar
        </MudButton>

        <MudSpacer />

        @if (stepper.ActiveIndex < stepper.Steps.Count - 1)
        {
            @if (loading)
            {
                <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
            }
            else
            {
                <MudButton StartIcon="@Icons.Material.Filled.NavigateNext"
                           Color="Color.Primary"
                           OnClick="@(() => stepper.NextStepAsync())">
                    Pasar al Siguiente
                </MudButton>
            }
        }
        else
        {
            @if (loading)
            {
                <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
            }
            else
            {
                <MudButton StartIcon="@Icons.Material.Filled.Check"
                           Color="Color.Primary"
                           OnClick="FinalizarRegistro">
                    Finalizar
                </MudButton>
            }
        }
    </ActionContent>
</MudStepper>


